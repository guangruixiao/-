<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>selector</title>
	<style>
	  div,p {width: 50px;height: 50px;margin:10px 0; border:1px solid red;}
	</style>
</head>
<body>

	<div></div>
	<div id="yes"></div>
	<p></p>
	<p class="no"></p>

	<script>
		// 三种选择方式 元素、类、id

			var getTag=function(tag,results) {
				results=results||[]
				results.push.apply(results,document.getElementsByTagName(tag)) 
				return results
			};

			var getClass=function(className,results) {
				results=results||[]
				results.push.apply(results,document.getElementsByClassName(className)) 
				return results
			};

			var getId=function(id,results) {
				results=results||[]
				results.push(document.getElementById(id)) 
				return results
			};

	

		// 综合选择，封装上述三种，并补充全部选择*
			var get=function(selector, results) {
				
				results = results || [];
            //                     1          2        3       4
            var rquickExpr = /^(?:#([\w-]+)|\.([\w-]+)|([\w]+)|(\*))$/,
                m = rquickExpr.exec( selector );
             
            if ( m ) {
                 
                if ( m[ 1 ] ) {
                    results = getId( m[ 1 ], results );
                } else if ( m[ 2 ] ) {
                    results = getClass( m[ 2 ], results );
                } else if ( m[ 3 ] ) {
                    results = getTag( m[ 3 ], results );
                } else if ( m[ 4 ] ) {
                    results = getTag( m[ 4 ], results );
                }
                 
            }
             
            return results;						
			};

		//迭代封装
	       var each=function(arr,fn) {
	       	 for (var i = 0; i < arr.length; i++) {
	       	 	 if ( fn.call(arr[i],i,arr[i])===false) {
	       	 	 	break;
	       	 	 }  
	       	 }
	       };

	       each(get(".no"),function(i,v) {
	       		this.style.background="yellow"
	       	
	       })












	</script>
	
</body>
</html>